<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„é›²ç«¯é»é¤ç³»çµ±</title>
    <style>
        /* CSSï¼šè² è²¬ç¾åŒ–ä»‹é¢ */
        :root { --p: #e67e22; --s: #27ae60; --bg: #f8f9fa; }
        body { font-family: "Microsoft JhengHei", sans-serif; background: var(--bg); margin: 0; padding-bottom: 50px; }
        header { background: white; text-align: center; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .filter-bar { margin-top: 15px; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .filter-bar button { padding: 8px 15px; border: 1px solid var(--p); background: transparent; color: var(--p); border-radius: 20px; cursor: pointer; }
        .filter-bar button:hover { background: var(--p); color: white; }
        .main-content { display: flex; max-width: 1000px; margin: 20px auto; gap: 20px; padding: 0 15px; flex-wrap: wrap; }
        .menu-grid { flex: 2; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }
        .menu-card { background: white; padding: 15px; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .menu-card h4 { margin: 10px 0 5px; }
        .menu-card .price { color: var(--p); font-weight: bold; display: block; margin-bottom: 10px; }
        .menu-card button { width: 100%; background: var(--s); color: white; border: none; padding: 8px; border-radius: 6px; cursor: pointer; }
        .cart-sidebar { flex: 1; background: white; padding: 20px; border-radius: 12px; height: fit-content; min-width: 280px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
        .qty-btn { border: 1px solid #ddd; background: white; width: 25px; cursor: pointer; border-radius: 3px; }
        .cart-footer { margin-top: 20px; border-top: 2px solid #eee; padding-top: 10px; }
        #checkout-btn { width: 100%; padding: 12px; background: var(--p); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        /* å½ˆå‡ºè¦–çª— */
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); align-items:center; justify-content:center; z-index:1000; }
        .modal-content { background:white; padding:30px; border-radius:15px; text-align:center; }
    </style>
</head>
<body>

<header>
    <h1>ç¾å‘³é›²ç«¯é»é¤</h1>
    <div class="filter-bar">
        <button onclick="renderMenu('å…¨éƒ¨')">å…¨éƒ¨</button>
        <button onclick="renderMenu('ä¸»é¤')">ä¸»é¤</button>
        <button onclick="renderMenu('éºµé£Ÿ')">éºµé£Ÿ</button>
        <button onclick="renderMenu('é£²æ–™')">é£²æ–™</button>
    </div>
</header>

<main class="main-content">
    <div id="menu-cards" class="menu-grid"></div>
    <aside class="cart-sidebar">
        <h3>ğŸ›’ è³¼ç‰©è»Š</h3>
        <div id="cart-list"></div>
        <div class="cart-footer">
            <h3 id="total-price">ç¸½é‡‘é¡ï¼š$0</h3>
            <button id="checkout-btn">é€å‡ºè¨‚å–®</button>
        </div>
    </aside>
</main>

<div id="msg-modal" class="modal">
    <div class="modal-content">
        <h2 id="modal-text">è¨‚å–®è™•ç†ä¸­...</h2>
        <button onclick="closeModal()" id="close-m-btn" style="display:none; padding:8px 20px;">å®Œæˆ</button>
    </div>
</div>

<script>
    // è³‡æ–™ï¼šé¤é»å…§å®¹
    const products = [
        { id: 1, name: 'æ»·è‚‰é£¯', price: 45, cat: 'ä¸»é¤' },
        { id: 2, name: 'é›è…¿é£¯', price: 110, cat: 'ä¸»é¤' },
        { id: 3, name: 'ç‰›è‚‰éºµ', price: 150, cat: 'éºµé£Ÿ' },
        { id: 4, name: 'ä¹¾æ‹Œéºµ', price: 60, cat: 'éºµé£Ÿ' },
        { id: 5, name: 'ç´…èŒ¶', price: 30, cat: 'é£²æ–™' },
        { id: 6, name: 'å¥¶èŒ¶', price: 40, cat: 'é£²æ–™' }
    ];

    // å¾è¨˜æ†¶é«”è®€å–è³¼ç‰©è»Š
    let cart = JSON.parse(localStorage.getItem('myOrder')) || [];

    function renderMenu(filter = 'å…¨éƒ¨') {
        const grid = document.getElementById('menu-cards');
        grid.innerHTML = '';
        products.filter(p => filter === 'å…¨éƒ¨' || p.cat === filter).forEach(p => {
            grid.innerHTML += `
                <div class="menu-card">
                    <small>${p.cat}</small>
                    <h4>${p.name}</h4>
                    <span class="price">$${p.price}</span>
                    <button onclick="addToCart(${p.id})">åŠ å…¥</button>
                </div>`;
        });
    }

    function addToCart(id) {
        const item = products.find(p => p.id === id);
        const inCart = cart.find(c => c.id === id);
        if (inCart) inCart.qty++; else cart.push({ ...item, qty: 1 });
        update();
    }

    function changeQty(id, n) {
        const inCart = cart.find(c => c.id === id);
        if (inCart) {
            inCart.qty += n;
            if (inCart.qty <= 0) cart = cart.filter(c => c.id !== id);
        }
        update();
    }

    function update() {
        localStorage.setItem('myOrder', JSON.stringify(cart));
        const list = document.getElementById('cart-list');
        list.innerHTML = cart.length ? '' : '<p>å°šæœªé»é¤</p>';
        let total = 0;
        cart.forEach(c => {
            total += c.price * c.qty;
            list.innerHTML += `
                <div class="cart-item">
                    <span>${c.name}</span>
                    <div>
                        <button class="qty-btn" onclick="changeQty(${c.id}, -1)">-</button>
                        <span>${c.qty}</span>
                        <button class="qty-btn" onclick="changeQty(${c.id}, 1)">+</button>
                    </div>
                </div>`;
        });
        document.getElementById('total-price').innerText = `ç¸½é‡‘é¡ï¼š$${total}`;
    }

    document.getElementById('checkout-btn').onclick = () => {
        if (!cart.length) return alert('è«‹å…ˆé¸è³¼é¤é»ï¼');
        document.getElementById('msg-modal').style.display = 'flex';
        setTimeout(() => {
            document.getElementById('modal-text').innerText = 'âœ… è¨‚å–®æˆåŠŸé€é”ï¼';
            document.getElementById('close-m-btn').style.display = 'inline-block';
            cart = []; update();
        }, 1500);
    };

    function closeModal() {
        document.getElementById('msg-modal').style.display = 'none';
        document.getElementById('modal-text').innerText = 'è¨‚å–®è™•ç†ä¸­...';
        document.getElementById('close-m-btn').style.display = 'none';
    }

    renderMenu();
    update();
</script>
</body>
</html>